<!DOCTYPE html>


  <html class="light page-post">


<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>spring-Ioc笔记 | 胡思旺</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="全栈,微服务,Java,Netty,Vue,机器学习,Python">
  

  <meta name="description" content="Spring-Ioc笔记Ioc理念 Ioc–(Inversion of Control)，意思是控制反转    上层模块不应该依赖于下层模块，它们共同依赖于一个抽象    抽象不能依赖于具体实现，具体实现依赖于抽象     IoC是一种设计思想，在Java开发中，IoC意味着将你设计好的对象交给容器控制，而不是传统的在你的对象内部直接控制    在传统JavaSE程序设计中，我们直接在对象内部通过">
<meta property="og:type" content="article">
<meta property="og:title" content="spring-Ioc笔记">
<meta property="og:url" content="http://yoursite.com/2018/12/12/spring-Ioc笔记/index.html">
<meta property="og:site_name" content="胡思旺">
<meta property="og:description" content="Spring-Ioc笔记Ioc理念 Ioc–(Inversion of Control)，意思是控制反转    上层模块不应该依赖于下层模块，它们共同依赖于一个抽象    抽象不能依赖于具体实现，具体实现依赖于抽象     IoC是一种设计思想，在Java开发中，IoC意味着将你设计好的对象交给容器控制，而不是传统的在你的对象内部直接控制    在传统JavaSE程序设计中，我们直接在对象内部通过">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2018-12-12T04:23:15.777Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="spring-Ioc笔记">
<meta name="twitter:description" content="Spring-Ioc笔记Ioc理念 Ioc–(Inversion of Control)，意思是控制反转    上层模块不应该依赖于下层模块，它们共同依赖于一个抽象    抽象不能依赖于具体实现，具体实现依赖于抽象     IoC是一种设计思想，在Java开发中，IoC意味着将你设计好的对象交给容器控制，而不是传统的在你的对象内部直接控制    在传统JavaSE程序设计中，我们直接在对象内部通过">

  

  
    <link rel="icon" href="/favicon.ico">
  

  <link href="/css/styles.css?v=c114cben" rel="stylesheet">


  
    <link rel="stylesheet" href="/css/personal-style.css">
  

  

  
  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?57e94d016e201fba3603a8a2b0263af0";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>


  
  <script type="text/javascript">
	(function(){
	    var bp = document.createElement('script');
	    var curProtocol = window.location.protocol.split(':')[0];
	    if (curProtocol === 'https') {
	        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
	    }
	    else {
	        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
	    }
	    var s = document.getElementsByTagName("script")[0];
	    s.parentNode.insertBefore(bp, s);
	})();
  </script>



  

</head>
</html>
<body>


  
    <span id="toolbox-mobile" class="toolbox-mobile">盒子</span>
  

  <div class="post-header CENTER">
   
  <div class="toolbox">
    <a class="toolbox-entry" href="/">
      <span class="toolbox-entry-text">盒子</span>
      <i class="icon-angle-down"></i>
      <i class="icon-home"></i>
    </a>
    <ul class="list-toolbox">
      
        <li class="item-toolbox">
          <a class="CIRCLE" href="/archives/" rel="noopener noreferrer" target="_self">
            博客
          </a>
        </li>
      
        <li class="item-toolbox">
          <a class="CIRCLE" href="/project/" rel="noopener noreferrer" target="_self">
            项目
          </a>
        </li>
      
        <li class="item-toolbox">
          <a class="CIRCLE" href="/category/" rel="noopener noreferrer" target="_self">
            分类
          </a>
        </li>
      
        <li class="item-toolbox">
          <a class="CIRCLE" href="/search/" rel="noopener noreferrer" target="_self">
            搜索
          </a>
        </li>
      
        <li class="item-toolbox">
          <a class="CIRCLE" href="/about/" rel="noopener noreferrer" target="_self">
            联系
          </a>
        </li>
      
    </ul>
  </div>


</div>


  <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Spring-Ioc笔记"><span class="toc-text">Spring-Ioc笔记</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Ioc理念"><span class="toc-text">Ioc理念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Ioc容器"><span class="toc-text">Ioc容器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Bean定义"><span class="toc-text">Bean定义</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Bean-的作用域"><span class="toc-text">Bean 的作用域</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Bean-的生命周期"><span class="toc-text">Bean 的生命周期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Bean-后置处理器"><span class="toc-text">Bean 后置处理器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Ioc容器工作步骤"><span class="toc-text">Ioc容器工作步骤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#xml配置"><span class="toc-text">xml配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#如何使用容器"><span class="toc-text">如何使用容器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Java配置"><span class="toc-text">Java配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#注解配置"><span class="toc-text">注解配置</span></a></li></ol></li></ol>
  </div>



<div class="content content-post CENTER">
   <article id="post-spring-Ioc笔记" class="article article-type-post" itemprop="blogPost">
  <header class="article-header">
    <h1 class="post-title">spring-Ioc笔记</h1>

    <div class="article-meta">
      <span>
        <i class="icon-calendar"></i>
        <span>2018.12.12</span>
      </span>

      
        <span class="article-author">
          <i class="icon-user"></i>
          <span>siwang.hu</span>
        </span>
      

      
  <span class="article-category">
    <i class="icon-list"></i>
    <a class="article-category-link" href="/categories/Spring/">Spring</a>
  </span>



      
        <span>
          <i class="icon-comment"></i>
          <a href="http://www.github.com/siwanghu/2018/12/12/spring-Ioc笔记/#disqus_thread"></a>
        </span>
      

      
      
    </div>
  </header>

  <div class="article-content">
    
      <h1 id="Spring-Ioc笔记"><a href="#Spring-Ioc笔记" class="headerlink" title="Spring-Ioc笔记"></a>Spring-Ioc笔记</h1><h2 id="Ioc理念"><a href="#Ioc理念" class="headerlink" title="Ioc理念"></a>Ioc理念</h2><blockquote>
<p>Ioc–(Inversion of Control)，意思是控制反转  </p>
<ul>
<li><p>上层模块不应该依赖于下层模块，它们共同依赖于一个抽象  </p>
</li>
<li><p>抽象不能依赖于具体实现，具体实现依赖于抽象  </p>
</li>
</ul>
<p>IoC是一种设计思想，在Java开发中，IoC意味着将你设计好的对象交给容器控制，而不是传统的在你的对象内部直接控制  </p>
<ul>
<li><p>在传统JavaSE程序设计中，我们直接在对象内部通过new进行创建依赖的对象，是程序主动去创建依赖对象；而IoC是有专门一个容器来创建这些对象，即由IoC容器来控制对象的创建  </p>
</li>
<li><p>传统应用程序是由我们自己在对象中主动控制去直接获取依赖对象，也就是正转；而反转则是由容器来帮忙创建及注入依赖对象；对象只是被动的接受依赖对象,依赖对象的获取被反转了  </p>
</li>
</ul>
<p>假设类A的工作依赖类B<br><strong>传统方式</strong>  </p>
<ul>
<li>创建类A  </li>
<li>创建类B  </li>
<li>将类B主动注入类A（构造函数或set方法）  </li>
<li>用户使用类A  </li>
</ul>
<p><strong>Ioc/DI方式</strong>  </p>
<ul>
<li>创建类A</li>
<li>容器查看类A是否有依赖对象；如果有，由Ioc容器自动创建对象并注入类A，由容器管理对象的生命周期  </li>
<li>用户使用类A  </li>
</ul>
<p>采用IoC容器后，把创建和查找依赖对象的控制权交给了容器，由容器进行注入组合对象，使得对象与对象之间是松散耦合，方便对象的测试，利于功能复用，程序的整个体系结构变得异常灵活  </p>
</blockquote>
<h2 id="Ioc容器"><a href="#Ioc容器" class="headerlink" title="Ioc容器"></a>Ioc容器</h2><blockquote>
<p>org.springframework.beans 和 org.springframework.context 是 IoC 容器的基础  </p>
<p>在Spring中，有两种 IoC 容器：BeanFactory和 ApplicationContext  </p>
<ul>
<li><p>BeanFactory：Spring 实例化、配置和管理对象的最基本接口  </p>
</li>
<li><p>ApplicationContext：BeanFactory 的子接口。它还扩展了其他一些接口，以支持更丰富的功能，如：国际化、访问资源、事件机制、更方便的支持 AOP、在 web 应用中指定应用层上下文等  </p>
</li>
</ul>
<p>常见ApplicationContext实现  </p>
<ul>
<li><p>BeanFactory beanFactory = new ClassPathXmlApplicationContext(“classpath.xml”);<br>从 classpath 获取配置文件；</p>
</li>
<li><p>BeanFactory beanFactory = new FileSystemXmlApplicationContext(“fileSystemConfig.xml”);<br>从文件系统获取配置文件  </p>
</li>
</ul>
</blockquote>
<h2 id="Bean定义"><a href="#Bean定义" class="headerlink" title="Bean定义"></a>Bean定义</h2><blockquote>
<p>bean 是一个被实例化，组装，并通过 Spring IoC 容器所管理的对象。这些 bean 是由用容器提供的配置元数据创建的<br>每个 bean 定义的下列属性：</p>
<ul>
<li><p>class这个属性是强制性的，并且指定用来创建bean的bean类  </p>
</li>
<li><p>name这个属性指定唯一的 bean 标识符。在基于 XML 的配置元数据中，你可以使用 ID 和/或 name 属性来指定 bean 标识符  </p>
</li>
<li><p>scope这个属性指定由特定的 bean 定义创建的对象的作用域  </p>
</li>
<li><p>constructor-arg    它是用来注入依赖关系的</p>
</li>
<li><p>properties    它是用来注入依赖关系的  </p>
</li>
<li><p>autowiring mode    它是用来注入依赖关系的  </p>
</li>
<li><p>lazy-initialization mode    延迟初始化的 bean 告诉 IoC 容器在它第一次被请求时，而不是在启动时去创建一个 bean 实例  </p>
</li>
<li><p>destruction 方法当包含该 bean 的容器被销毁时，使用回调方法  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line"></span><br><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</span><br><span class="line">    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line">   &lt;!-- A simple bean definition --&gt;</span><br><span class="line">   &lt;bean id=&quot;...&quot; class=&quot;...&quot;&gt;</span><br><span class="line">       &lt;!-- collaborators and configuration for this bean go here --&gt;</span><br><span class="line">   &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">   &lt;!-- A bean definition with lazy init set on --&gt;</span><br><span class="line">   &lt;bean id=&quot;...&quot; class=&quot;...&quot; lazy-init=&quot;true&quot;&gt;</span><br><span class="line">       &lt;!-- collaborators and configuration for this bean go here --&gt;</span><br><span class="line">   &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">   &lt;!-- A bean definition with initialization method --&gt;</span><br><span class="line">   &lt;bean id=&quot;...&quot; class=&quot;...&quot; init-method=&quot;...&quot;&gt;</span><br><span class="line">       &lt;!-- collaborators and configuration for this bean go here --&gt;</span><br><span class="line">   &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">   &lt;!-- A bean definition with destruction method --&gt;</span><br><span class="line">   &lt;bean id=&quot;...&quot; class=&quot;...&quot; destroy-method=&quot;...&quot;&gt;</span><br><span class="line">       &lt;!-- collaborators and configuration for this bean go here --&gt;</span><br><span class="line">   &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">   &lt;!-- more bean definitions go here --&gt;</span><br><span class="line"></span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<h3 id="Bean-的作用域"><a href="#Bean-的作用域" class="headerlink" title="Bean 的作用域"></a>Bean 的作用域</h3><blockquote>
<p>当在 Spring 中定义一个 时，你必须声明该 bean 的作用域的选项。例如，为了强制 Spring 在每次需要时都产生一个新的 bean 实例，你应该声明 bean 的作用域的属性为 prototype。同理，如果你想让 Spring 在每次需要时都返回同一个bean实例，你应该声明 bean 的作用域的属性为 singleton  </p>
<ul>
<li>singleton    该作用域将 bean 的定义的限制在每一个 Spring IoC 容器中的一个单一实例(默认)。</li>
<li>prototype    该作用域将单一 bean 的定义限制在任意数量的对象实例。</li>
<li>request    该作用域将 bean 的定义限制为 HTTP 请求。只在 web-aware Spring ApplicationContext 的上下文中有效。</li>
<li>session    该作用域将 bean 的定义限制为 HTTP 会话。 只在web-aware Spring ApplicationContext的上下文中有效。</li>
<li>global-session    该作用域将 bean 的定义限制为全局 HTTP 会话。只在 web-aware Spring ApplicationContext 的上下文中有效<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line"></span><br><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</span><br><span class="line">    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line">   &lt;bean id=&quot;helloWorld&quot; class=&quot;com.tutorialspoint.HelloWorld&quot; </span><br><span class="line">      scope=&quot;prototype&quot;&gt;</span><br><span class="line">   &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<h3 id="Bean-的生命周期"><a href="#Bean-的生命周期" class="headerlink" title="Bean 的生命周期"></a>Bean 的生命周期</h3><blockquote>
<p>当一个 bean 被实例化时，它可能需要执行一些初始化使它转换成可用状态。同样，当 bean 不再需要，并且从容器中移除时，可能需要做一些清除工作  </p>
</blockquote>
<h3 id="Bean-后置处理器"><a href="#Bean-后置处理器" class="headerlink" title="Bean 后置处理器"></a>Bean 后置处理器</h3><blockquote>
<p>允许我们在工厂里所有的bean被加载进来后但是还没初始化前，对所有bean的属性进行修改也可以add属性值  </p>
</blockquote>
<h2 id="Ioc容器工作步骤"><a href="#Ioc容器工作步骤" class="headerlink" title="Ioc容器工作步骤"></a>Ioc容器工作步骤</h2><blockquote>
<ul>
<li><p>配置元数据：需要配置一些元数据来告诉 Spring，你希望容器如何工作，具体来说，就是如何去初始化、配置、管理 JavaBean 对象  </p>
</li>
<li><p>实例化容器：由 IoC 容器解析配置的元数据。IoC 容器的 Bean Reader 读取并解析配置文件，根据定义生成 BeanDefinition 配置元数据对象，IoC 容器根据 BeanDefinition 进行实例化、配置及组装 Bean  </p>
</li>
<li><p>使用容器：由客户端实例化容器，获取需要的 Bean  </p>
</li>
</ul>
<p><strong>配置元数据方式</strong>  </p>
<ul>
<li><p>基于 xml 配置：Spring 的传统配置方式。在<strong>beans</strong>标签中配置元数据内容。缺点是当JavaBean过多时，产生的配置文件不易维护  </p>
</li>
<li><p>基于注解配置：Spring2.5引入,可以简化你的配置  </p>
</li>
<li><p>基于 Java 配置：可以使用 Java 类来定义 JavaBean 。<br>为了使用这个新特性，需要用到 @Configuration 、@Bean 、@Import 和 @DependsOn 注解  </p>
</li>
</ul>
</blockquote>
<h2 id="xml配置"><a href="#xml配置" class="headerlink" title="xml配置"></a>xml配置</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</span><br><span class="line">         http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;</span><br><span class="line">  &lt;import resource=&quot;resource1.xml&quot; /&gt;</span><br><span class="line"></span><br><span class="line">  &lt;bean id=&quot;bean1&quot; class=&quot;&quot;&gt;&lt;/bean&gt;</span><br><span class="line">  &lt;bean id=&quot;bean2&quot; class=&quot;&quot;&gt;&lt;/bean&gt;</span><br><span class="line">  &lt;bean name=&quot;bean2&quot; class=&quot;&quot;&gt;&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">  &lt;alias alias=&quot;bean3&quot; name=&quot;bean2&quot;/&gt;</span><br><span class="line">  &lt;import resource=&quot;resource2.xml&quot; /&gt;  </span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li><strong>beans</strong> 是 Spring 配置文件的根节点  </li>
<li><strong>bean</strong>  用来定义一个JavaBean；id属性是它的标识，在文件中必须唯一；class 属性是它关联的类  </li>
<li><strong>alias</strong> 用来定义 Bean 的别名  </li>
<li><strong>import</strong> 用来导入其他配置文件的 Bean 定义。这是为了加载多个配置文件，当然也可以把这些配置文件构造为一个数组（new String[] {“config1.xml”, config2.xml}）传给 ApplicationContext 实现类进行加载多个配置文件  </li>
</ul>
</blockquote>
<h2 id="如何使用容器"><a href="#如何使用容器" class="headerlink" title="如何使用容器"></a>如何使用容器</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// create and configure beans</span><br><span class="line">ApplicationContext context =</span><br><span class="line">new ClassPathXmlApplicationContext(new String[] &#123;&quot;services.xml&quot;, &quot;daos.xml&quot;&#125;);</span><br><span class="line">// retrieve configured instance</span><br><span class="line">PetStoreService service = context.getBean(&quot;petStore&quot;, PetStoreService.class);</span><br><span class="line">// use configured instance</span><br><span class="line">List&lt;String&gt; userList = service.getUsernameList();</span><br></pre></td></tr></table></figure>
<blockquote>
<p>使用容器的方式就是通过getBean获取IoC容器中的JavaBean  </p>
</blockquote>
<h2 id="Java配置"><a href="#Java配置" class="headerlink" title="Java配置"></a>Java配置</h2><blockquote>
<ul>
<li><p>基于Java配置 Spring IoC 容器，实际上是Spring 允许用户定义一个类，在这个类中去管理 IoC 容器的配置  </p>
</li>
<li><p>需要用到两个注解：@Configuration和@Bean  </p>
</li>
<li><p>@Configuration等价于xml配置中的beans标签；将@Bean等价于xml配置中的bean标签  </p>
</li>
<li><p>@Bean 的修饰目标只能是方法或注解  </p>
</li>
<li><p>@Bean 只能定义在@Configuration或@Component注解修饰的类中  </p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">@Configuration</span><br><span class="line">public class AnnotationConfiguration &#123;</span><br><span class="line">    private static final Logger log = LoggerFactory.getLogger(JavaComponentScan.class);</span><br><span class="line"></span><br><span class="line">    @Bean</span><br><span class="line">    public Job getPolice() &#123;</span><br><span class="line">        return new Police();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext(AnnotationConfiguration.class);</span><br><span class="line">        ctx.scan(&quot;org.zp.notes.spring.beans&quot;);</span><br><span class="line">        ctx.refresh();</span><br><span class="line">        Job job = (Job) ctx.getBean(&quot;police&quot;);</span><br><span class="line">        log.debug(&quot;job: &#123;&#125;, work: &#123;&#125;&quot;, job.getClass(), job.work());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public interface Job &#123;</span><br><span class="line">    String work();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Component(&quot;police&quot;)</span><br><span class="line">public class Police implements Job &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public String work() &#123;</span><br><span class="line">        return &quot;抓罪犯&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>等价于xml配置<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;beans&gt;</span><br><span class="line">    &lt;bean id=&quot;police&quot; class=&quot;org.zp.notes.spring.ioc.sample.job.Police&quot;/&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>@Bean 注解用来表明一个方法实例化、配置合初始化一个被 Spring IoC 容器管理的新对象。如果你熟悉 Spring 的 xml 配置，你可以将@Bean 视为等价于beans标签。@Bean 注解可以用于任何的 Spring @Component bean，然而，通常被用于@Configuration bean  </p>
</blockquote>
<h2 id="注解配置"><a href="#注解配置" class="headerlink" title="注解配置"></a>注解配置</h2><blockquote>
<ul>
<li><p>减少了配置，并且可以使配置更加精细——类，方法，字段都可以用注解去标记  </p>
</li>
<li><p>使用注解，不可避免产生了侵入式编程，你需要将注解加入你的源码并编译它,注解往往比较分散，不易管控  </p>
</li>
<li>Spring 默认是不启用注解的。如果想使用注解，需要先在 xml 中启动注解。 启动方式：在 xml 中加入一个标签  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">    xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</span><br><span class="line">    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</span><br><span class="line">    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd</span><br><span class="line">    http://www.springframework.org/schema/context</span><br><span class="line">    http://www.springframework.org/schema/context/spring-context-3.0.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line">   &lt;context:annotation-config/&gt;</span><br><span class="line">   &lt;!-- bean definitions go here --&gt;</span><br><span class="line"></span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<blockquote>
<p>一旦被配置后，你就可以开始注解你的代码，表明 Spring 应该自动连接值到属性，方法和构造函数</p>
<ul>
<li>@Required 注解应用于 bean 属性的 setter 方法  </li>
<li>@Autowired 注解可以应用到 bean 属性的 setter 方法，非 setter 方法，构造函数和属性</li>
<li>@Qualifier通过指定确切的将被连线的 bean，@Autowired 和 @Qualifier 注解可以用来删除混乱  </li>
<li>JSR-250 Annotations Spring 支持 JSR-250 的基础的注解，其中包括了 @Resource，@PostConstruct和@PreDestroy注解  </li>
</ul>
<p><strong>重点区分问题</strong></p>
<ul>
<li><strong>所谓的注解配置的意思是：在xml配置文件中，我们只要声明这个bean即可，使用bean标签；bean之间的依赖在代码中使用注解去配置,而不是在xml文件中写明各个类之间的依赖关系</strong>  </li>
<li><strong>所谓Java配置也是在xml配置文件中声明这个bean即可，依赖在代码中写明，常用与系统的配置</strong>  </li>
</ul>
</blockquote>

    
  </div>

</article>


   
  <div class="text-center donation">
    <div class="inner-donation">
      <span class="btn-donation">支持一下</span>
      <div class="donation-body">
        <div class="tip text-center">扫一扫，支持胡思旺</div>
        <ul>
        
          <li class="item">
            
              <span>微信扫一扫</span>
            
            <img src="/images/qr-wechat.jpg" alt="">
          </li>
        
          <li class="item">
            
              <span>支付宝扫一扫</span>
            
            <img src="/images/qr-alipay.jpg" alt="">
          </li>
        
        </ul>
      </div>
    </div>
  </div>


   
  <div class="box-prev-next clearfix">
    <a class="show pull-left" href="/2018/12/12/spring概述笔记/">
        <i class="icon icon-angle-left"></i>
    </a>
    <a class="hide pull-right" href="/">
        <i class="icon icon-angle-right"></i>
    </a>
  </div>





   
      <div class="git"></div>
   
</div>


  <a id="backTop" class="back-top">
    <i class="icon-angle-up"></i>
  </a>




  <div class="modal" id="modal">
  <span id="cover" class="cover hide"></span>
  <div id="modal-dialog" class="modal-dialog hide-dialog">
    <div class="modal-header">
      <span id="close" class="btn-close">关闭</span>
    </div>
    <hr>
    <div class="modal-body">
      <ul class="list-toolbox">
        
          <li class="item-toolbox">
            <a class="CIRCLE" href="/archives/" rel="noopener noreferrer" target="_self">
              博客
            </a>
          </li>
        
          <li class="item-toolbox">
            <a class="CIRCLE" href="/project/" rel="noopener noreferrer" target="_self">
              项目
            </a>
          </li>
        
          <li class="item-toolbox">
            <a class="CIRCLE" href="/category/" rel="noopener noreferrer" target="_self">
              分类
            </a>
          </li>
        
          <li class="item-toolbox">
            <a class="CIRCLE" href="/search/" rel="noopener noreferrer" target="_self">
              搜索
            </a>
          </li>
        
          <li class="item-toolbox">
            <a class="CIRCLE" href="/about/" rel="noopener noreferrer" target="_self">
              联系
            </a>
          </li>
        
      </ul>

    </div>
  </div>
</div>



  
      <div class="fexo-comments comments-post">
    
  <section class="disqus-comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
  </section>

  <script>
    var disqus_shortname = 'forsigner';
    
    var disqus_url = 'http://yoursite.com/2018/12/12/spring-Ioc笔记/';
    
    (function(){
      var dsq = document.createElement('script');
      dsq.type = 'text/javascript';
      dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>

  <script id="dsq-count-scr" src="//forsigner.disqus.com/count.js" async></script>



    

    
    

    

    
    

  </div>

  

  <script type="text/javascript">
  function loadScript(url, callback) {
    var script = document.createElement('script')
    script.type = 'text/javascript';

    if (script.readyState) { //IE
      script.onreadystatechange = function() {
        if (script.readyState == 'loaded' ||
          script.readyState == 'complete') {
          script.onreadystatechange = null;
          callback();
        }
      };
    } else { //Others
      script.onload = function() {
        callback();
      };
    }

    script.src = url;
    document.getElementsByTagName('head')[0].appendChild(script);
  }

  window.onload = function() {
    loadScript('/js/bundle.js?235683', function() {
      // load success
    });
  }
</script>

</body>
</html>
